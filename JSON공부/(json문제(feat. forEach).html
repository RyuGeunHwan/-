<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON</title>
  </head>
  <body>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <!-- 소스 구현 -->
    <script>
      /*
      no : 데이터 고유 번호
      driver : 운전자
      car : 탑승 차량
      mileage : 주행 거리
      createAt : 운행시작 날짜
      endAt : 운행종료 날짜
      */
      var carData = [
        {
          no: 1,
          driver: '박재범',
          car: 'K5',
          mileage: '30',
          createAt: '2022-03-24 09:30:21',
          endAt: '2022-03-24 10:30:55',
        },
        {
          no: 2,
          driver: '김종국',
          car: 'K5',
          mileage: '10',
          createAt: '2022-03-24 10:55:12',
          endAt: '2022-03-24 11:10:12',
        },
        {
          no: 3,
          driver: '박재범',
          car: 'K5',
          mileage: '5',
          createAt: '2022-03-24 11:20:00',
          endAt: '2022-03-24 11:30:12',
        },
        {
          no: 4,
          driver: '김종국',
          car: 'K5',
          mileage: '17',
          createAt: '2022-03-24 12:00:30',
          endAt: '2022-03-24 12:50:00',
        },
      ];
      $.each(carData, function (index, item) {
        console.log(item);
      });

      $(carData).each(function (index, item) {
        console.log(item);
      });
      // 새로운 방법
      console.log(carData);
      var sum = 0;
      let count = 0;
      let k5MileageSum = 0;
      carData.forEach(function (element) {
        // forEach = carData를 for문을 돌린것과 같다.
        // element = carData[i]값과 같다.
        // console.log(element); //element는 배열의 원소값을 가르킨다.
        if (element.driver === '김종국') {
          sum += Number(element.mileage); //Number()는 문자에서 숫자로 변환!
        }
        if (element.driver == '박재범') {
          ++count;
        }
        if (element.car == 'K5') {
          let k5MileageParseInt = parseInt(element.mileage);
          //   console.log(k5MileageParseInt);
          k5MileageSum += k5MileageParseInt;
        }
        if (element.driver == '김종국') {
          console.log('종국이형 운행시작 = ' + element.createAt);
          console.log('종국이형 운행종료 = ' + element.endAt);
          console.log('-------------------------------------------');
        }
      });
      console.log('운전자가 김종국인 차량 주행거리 총합은? ' + sum);
      console.log('운전자가 박재범인 차량의 json데이터 수는? ' + count);
      console.log(k5MileageSum);
      // for문(=forEach) 새로운 방법
      // carData.forEach(function (element) {}
      // carData for(){}문과 같은 함수
      //
      //
      //문제 1. 운전자가 김종국인 차량 주행거리 총합을 구하시오.
      // for문 기존 방법
      // let sum = 0;
      // for (var i = 0; i < carData.length; i++) {
      //   if (carData[i].driver == '김종국') {
      //     var mileage = Number(carData[i].mileage);
      //     console.log(mileage);
      //     sum += mileage;
      //   }
      // }
      // console.log('운전자가 김종국인 차량 주행거리 총합은? ' + sum);
      //
      //
      //문제 2. 운전자가 박재범인 차량의 json데이터 수는?
      // let count = 0;
      // for (var i = 0; i < carData.length; i++) {
      //   if (carData[i].driver == '박재범') {
      //     count++;
      //   }
      // }
      // console.log('운전자가 박재범인 차량의 json데이터 수는? ' + count);
      //
      //
      //문제 3. 자동차가 K5인 차량의 주행거리 총합을 구하시오.
      // let k5MileageSum = 0;
      // for (var i = 0; i < carData.length; i++) {
      //   if (carData[i].car == 'K5') {
      //     let k5MileageParseInt = parseInt(carData[i].mileage);
      //     //   console.log(k5MileageParseInt);
      //     k5MileageSum += k5MileageParseInt;
      //   }
      // }
      // console.log(k5MileageSum);
      //
      //
      //문제 4. 운전자가 김종국인 차량의 운행시작과 운행종료를 모두 출력하시오.
      // for (var i = 0; i < carData.length; i++) {
      //   if (carData[i].driver == '김종국') {
      //     console.log('종국이형 운행시작 = ' + carData[i].createAt);
      //     console.log('종국이형 운행종료 = ' + carData[i].endAt);
      //     console.log('');
      //   }
      // }
      //
      //
      // 문제 5. 날짜 계산 방법(박재범의 운행시작과 운행종료한 운행시간 구하기!)
      console.log('-------------------------------------------');
      var start = carData[0].createAt;
      var end = carData[0].endAt;
      // step1. 문자를 날짜 형식으로 변경.
      start = new Date(start);
      console.log('운행 시작 시간 = ' + start);
      end = new Date(end);
      console.log('운행 종료 시간 = ' + end);
      console.log('-------------------------------------------');
      // step2. 날짜를 초 단위로 변경.
      // 언제 부터 인지 기준은 1970년 1월 1일 자정기준 부터 Millisecond 시간!

      console.log('시작 시간을 초 단위로 바꿈 = ' + start.getTime());
      console.log('종료 시간을 초 단위로 바꿈 = ' + end.getTime());
      console.log('-------------------------------------------');
      // step3. 종료시간(초단위) - 시작시간(초단위)
      // 연산자' / '= 나누기 몫 값!
      // 1초는 === 1000ms(Millisecond), 1분 === 60초
      // 1000 = 1초 / 1000 * 60(=60초) = 1분 / 1000 *60*60(=3600초 = 1시간) = 1시간
      // 초으로 바꿔서 계산
      var diffSecond = (end.getTime() - start.getTime()) / 1000;
      console.log('운행 시간은?');
      console.log('종료시간에서 시작시간을 뺀 초의 값은 ? ' + diffSecond);
      // 분으로 바꿔서 계산
      var diffMinute = (end.getTime() - start.getTime()) / (1000 * 60);
      console.log('종료시간에서 시작시간을 뺀 분의 값은 ? ' + diffMinute);
      // 시간으로 바꿔서 계산
      var diffhour = (end.getTime() - start.getTime()) / (1000 * 60 * 60);
      console.log('종료시간에서 시작시간을 뺀 시간의 값은 ? ' + diffhour);
      // 날짜로 바꿔서 계산
      var diffday = (end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24);
      console.log('종료시간에서 시작시간을 뺀 날짜의 값은 ? ' + diffday);
    </script>
  </body>
</html>
